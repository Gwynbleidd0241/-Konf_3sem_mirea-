# Учебная виртуальная машина (УВМ)

Данный проект реализует ассемблер и интерпретатор для учебной виртуальной машины (УВМ), который позволяет компилировать и исполнять программы, написанные на ассемблере для данной виртуальной машины. 

## Описание проекта

1. **Ассемблер** — создает бинарный файл, который является машинным кодом программы, интерпретируемым УВМ.
   - Принимает на вход файл с текстом исходной программы, путь к которому передается через командную строку.
   - Выводит бинарный файл, путь к которому также передается через командную строку.
   - В дополнительном файле-логе сохраняет ассемблированные инструкции в формате `ключ=значение` в формате YAML.

2. **Интерпретатор** — выполняет машинный код программы, загруженный из бинарного файла, и сохраняет диапазон значений памяти УВМ.
   - Принимает на вход бинарный файл с машинным кодом.
   - Выводит результаты выполнения в файл в формате YAML, диапазон памяти для вывода задается из командной строки.

## Формат команд УВМ

### 1. Загрузка константы
- **Формат команды**: 3 байт
- **Операнд**: поле B
- **Результат**: регистр по адресу, заданному полем C
- **Пример команды**: (A=15, B=160, C=3)  
  **Машинный код**: `0x0F, 0x6A, 0x00`

### 2. Чтение значения из памяти
- **Формат команды**: 3 байта
- **Операнд**: значение в памяти по адресу, заданному полем C
- **Результат**: регистр по адресу, заданному полем B
- **Пример команды**: (A=0, B=3, C=300)  
  **Машинный код**: `0x30, 0x2С, 0x01`

### 3. Запись значения в память
- **Формат команды**: 2 байта
- **Операнд**: регистр по адресу, которым является поле B
- **Результат**: значение в памяти по адресу, которым является регистр по адресу поля С
- **Пример команды**: (A=12, B=12, C=7)  
  **Машинный код**: `0xCC, 0x07`

### 4. Бинарная операция: побитовое <
- **Формат команды**: 3 байт
- **Первый операнд**: значение в памяти по адресу, которым является поле B
- **Второй операнд**: регистр по адресу, которым является поле C
- **Результат**: значение в памяти по адресу, которым является поле B
- **Пример команды**: (A=10, B=527, C=10)  
  **Машинный код**: `0xFA, 0xA0, 0x02`

## Установка и запуск

1. **Компиляция программы** (Ассемблер):
   ```bash
   python assembler.py <путь_к_исходному_файлу> <путь_к_бинарному_файлу> <путь_к_файлу_логу>
   ```
    Для запуска программы ассемблера используйте:
    ```bash
    python3 assembler.py program.asm program.bin log.yaml   
    ```
2. **Выполнение программы** (Интерпретатор):
    ```bash
    python interpreter.py <путь_к_бинарному_файлу> <путь_к_файлу_результатов> <диапазон_памяти>  
    ```
   Для запуска программы интерпретатора используйте:
    ```bash
   python3 interpreter.py program.bin result.yaml 0,256 
    ```
## Формат выходных файлов  
- **Файл-лог**:  YAML-файл, содержащий ассемблированные инструкции в формате ключ=значение.
- **Файл-результат:**: YAML-файл с результатами выполнения команд в заданном диапазоне памяти.

## Тестирование
Выполнить поэлементно операцию побитовое "<" над двумя векторами длины 5. Результат записать в новый вектор

Для запуска программы ассемблера используйте:
   ```bash
    python3 assembler.py test.asm program.bin log.yaml   
   ```
Для запуска программы интерпретатора используйте:
   ```bash
    python3 interpreter.py program.bin result_test.yaml 0,256  
   ```
**Входные данные**: два вектора со значениями [1, 2, 3, 4, 5] и [6, 7, 8, 9, 10]

**Ожидаемые данные**: поэлементная операция побитовое "<" над двумя векторами, запись в новый вектор: [1, 1, 1, 1, 1]

**Результат**:

[1, 1, 1, 1, 1]